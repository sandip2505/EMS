<% var todays=new Date(2022,11) %>
  <% var month=todays.getMonth() %>
    <% var year=todays.getFullYear() %>
      <% var ld=new Date(year, month + 1, 0); %>
        <% var lastday=ld.getDate() %>
          <% var fd=new Date(year, month); %>
            <% var firstday=fd.getDate() %>

              <!DOCTYPE html>
              <html lang="en">
              <%- include('partials/header.ejs') %>

                <body>
                  <div class="container-scroller">
                    <%- include('partials/sidebar.ejs') %>
                      <div class="container-fluid page-body-wrapper">
                        <%- include('partials/navbar.ejs') %>
                          <div class="main-panel">
                            <div class="content-wrapper">
                              <div class="content-header">
                                <div class="container-fluid">

                                </div>
                              </div>
                              <section class="content">
                                <div class="container-fluid" id="wrapper">
                                  <div class="row">
                                    <div class="col-12">
                                      <div class="card">
                                        <div class="row mb-2">
                                          <div class="col-sm-6">
                                            <h1 class="m-0"><i class="fa-solid fa-virus"></i><span class="ml-2">Time
                                                Entries</span></h1>
                                          </div>
                                          <div class="col-sm-6">
                                            <select id='gMonth2' style="float:right;">
                                              <option value='' selected>--Select Month--</option>
                                              <option value='1'>Janaury</option>
                                              <option value='2'>February</option>
                                              <option value='3'>March</option>
                                              <option value='4'>April</option>
                                              <option value='5'>May</option>
                                              <option value='6'>June</option>
                                              <option value='7'>July</option>
                                              <option value='8'>August</option>
                                              <option value='9'>September</option>
                                              <option value='10'>October</option>
                                              <option value='11'>November</option>
                                              <option value='12'>December</option>
                                            </select>
                                            <select id='gyear' style="float:right;">
                                              <option value='' selected>--Select Year--</option>
                                              <option value='2022'>2022</option>
                                              <option value='2023'>2023</option>
                                              <option value='2024'>2024</option>
                                              <option value='2025'>2025</option>
                                            </select>
                                          </div>
                                        </div>
                                        <div class="card-body table-responsive" id="wrapper">
                                          <form method="post" id="form">
                                            <table border="1" cellpadding="10">
                                              <thead>
                                            
                                                  <tr>
                                                    <th width="">Project / Task</th>
                                                    <% for(i=1; i <=lastday; i++){ %>
                                                      <th width="2%">
                                                        <%= i %>
                                                      </th>
                                                      <% } %>
                                                  </tr>
                                              </thead>
                                              <tbody>
                                                <% for (const [key, project] of Object.entries(timeEntryData)) { %>
                                                  <% for (const [projectName, taskObject] of Object.entries(project)) {
                                                    %>
                                                    <% for (const [taskName, v1] of Object.entries(taskObject)) { %>
                                                      <tr>
                                                        <td>
                                                          <%= projectName %> / <%= taskName %>
                                                        </td>
                                                        <% for(j=1; j <=lastday; j++){ %>
                                                          <td>
                                                            <% for (const [d, dayObject] of Object.entries(v1)) { %>
                                                              <% if (v1[d][`${j}`] && v1[d][`${j}`]._day==j) { %>
                                                                <%= v1[d][`${j}`].h %>
                                                              <% } %>
                                                            <% } %>
                                                          </td>
                                                        <% } %>
                                                      </tr>
                                                    <% } %>
                                                  <% } %>
                                                <% } %>
                                              </tbody>
                                            </table>
                                          </form>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <%- include('partials/footer.ejs') %>
                </body>

              </html>